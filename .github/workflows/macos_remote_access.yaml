ame: Windows - Chrome Remote Desktop (CRD)

on:
  workflow_dispatch:

jobs:
  remote_session_crd:
    name: Iniciar Sesi√≥n Remota CRD (M√°x 9999 minutos)
    runs-on: windows-latest
    timeout-minutes: 9999
    
    steps:
      - name: üíæ Descargar e Instalar Chrome Remote Desktop Host
        # Este paso descarga el MSI del host de CRD para permitir la conexi√≥n desatendida.
        run: |
          $InstallerURL = "https://dl.google.com/dl/edgedl/chrome-remote-desktop/chromeremotedesktophost.msi"
          $OutputPath = "C:\Users\runneradmin\chromeremotedesktophost.msi"
          Write-Host "Descargando Chrome Remote Desktop Host desde $InstallerURL"
          
          # Descargar el instalador
          Invoke-WebRequest -Uri $InstallerURL -OutFile $OutputPath
          
          # Instalaci√≥n silenciosa del MSI
          Write-Host "Instalando silenciosamente el Host de CRD..."
          Start-Process msiexec -ArgumentList "/i $OutputPath /qn" -Wait
          Write-Host "Instalaci√≥n completada."

      - name: üîë Configurar y Ejecutar Servicio de CRD (¬°Atenci√≥n al Comando!)
        # Este paso DEBE contener tu comando √∫nico de autenticaci√≥n de Google.
        run: |
          # =========================================================================================
          # PASO FUNDAMENTAL: OBTENER EL COMANDO DE CONFIGURACI√ìN
          # 1. Ve a https://remotedesktop.google.com/access
          # 2. Haz clic en el bot√≥n AZUL "Activar" bajo "Configurar acceso remoto".
          # 3. La web te dar√° un comando de PowerShell para configurar el servicio.
          # 4. ¬°PEGA ESE COMANDO DE POWERSHELL EN LA L√çNEA DE ABAJO!
          # =========================================================================================
          
          # ELIMINA LA L√çNEA DE EJEMPLO DE ABAJO Y REEMPLAZA CON TU COMANDO REAL
          # Ejemplo de lo que se ver√≠a, PERO NO USES ESTO:
          # C:\Program Files\Google\Chrome Remote Desktop\remoting_host.exe --host-name="GitHub-Runner-1" --pin="123456" --oauth-client-id="..." --oauth-secret="..." --auto-start
          
          # [TU COMANDO DE CONFIGURACI√ìN GENERADO AQU√ç]
          
          Write-Host "El servicio de CRD est√° configurado y se est√° iniciando. Deber√≠a aparecer en la web de CRD pronto."

      - name: ‚è≥ Mantener el Runner Vivo
        run: |
          Write-Host "Manteniendo el runner vivo por la duraci√≥n m√°xima..."
          Start-Sleep -Seconds 999999
